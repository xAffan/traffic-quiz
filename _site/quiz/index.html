<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Traffic Rules Quiz | Traffic Safety Hub</title>
    <meta name="description" content="Learn traffic safety through interactive quizzes and expert tips">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="/traffic-quiz/assets/css/main.css">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸš¦</text></svg>">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand">
                <a href="/traffic-quiz/">
                    <i class="fas fa-traffic-light"></i>
                    Traffic Safety Hub
                </a>
            </div>
            <div class="nav-menu" id="nav-menu">
                <a href="/traffic-quiz/" class="nav-link">Home</a>
                <a href="/traffic-quiz/quizzes/" class="nav-link">Quizzes</a>
                <a href="/traffic-quiz/blog/" class="nav-link">Safety Blog</a>
                <a href="/traffic-quiz/about/" class="nav-link">About</a>
            </div>
            <div class="nav-toggle" id="nav-toggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <section class="quiz-section">
    <div class="container">
        <div class="quiz-header">
            <h1><i class="fas fa-graduation-cap"></i> Traffic Rules Quiz</h1>
            <p>Test your knowledge of Pakistan's traffic rules and road safety. Choose the best answer for each question.</p>
            
            <div class="quiz-stats">
                <div class="stat">
                    <span class="stat-label">Total Questions:</span>
                    <span class="stat-value" id="total-questions">20</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Your Score:</span>
                    <span class="stat-value" id="current-score">0</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Percentage:</span>
                    <span class="stat-value" id="percentage">0%</span>
                </div>
            </div>
        </div>

        <div class="quiz-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            
            <div id="quiz-content">
                <!-- Questions will be loaded here -->
            </div>

            <div class="quiz-controls">
                <button id="prev-btn" class="btn btn-secondary" disabled="">
                    <i class="fas fa-chevron-left"></i> Previous
                </button>
                <button id="next-btn" class="btn btn-primary" style="display: none;">
                    Next <i class="fas fa-chevron-right"></i>
                </button>
                <button id="continue-btn" class="btn btn-primary" style="display: none;">
                    Continue <i class="fas fa-chevron-right"></i>
                </button>
                <button id="submit-btn" class="btn btn-success" style="display: none;">
                    <i class="fas fa-check"></i> Submit Quiz
                </button>
            </div>
        </div>

        <div id="quiz-results" class="quiz-results" style="display: none;">
            <div class="results-header">
                <h2><i class="fas fa-trophy"></i> Quiz Results</h2>
                <div class="score-circle">
                    <div class="score-text">
                        <span id="final-score">0</span>
                        <small>out of 20</small>
                    </div>
                </div>
            </div>
            
            <div class="results-breakdown">
                <div class="result-item correct">
                    <i class="fas fa-check-circle"></i>
                    <span>Correct: <strong id="correct-count">0</strong></span>
                </div>
                <div class="result-item incorrect">
                    <i class="fas fa-times-circle"></i>
                    <span>Incorrect: <strong id="incorrect-count">0</strong></span>
                </div>
                <div class="result-item percentage">
                    <i class="fas fa-percentage"></i>
                    <span>Percentage: <strong id="final-percentage">0%</strong></span>
                </div>
            </div>

            <div class="quiz-summary">
                <h3><i class="fas fa-list"></i> Question Summary</h3>
                <div id="questions-summary"></div>
            </div>

            <div class="results-actions">
                <button id="restart-btn" class="btn btn-primary">
                    <i class="fas fa-redo"></i> Retake Quiz
                </button>
                <a href="/traffic-quiz/blog/" class="btn btn-secondary">
                    <i class="fas fa-book"></i> Read Safety Tips
                </a>
            </div>
        </div>
    </div>
</section>

<script>
// Quiz Data
const quizQuestions = [
    {
        question: "What does a red traffic light indicate?",
        options: ["Stop completely", "Slow down slightly", "Turn left only", "Honk and proceed"],
        correct: 0,
        explanation: "A red light means complete stop. You must wait until the light turns green before proceeding."
    },
    {
        question: "What is the default speed limit in urban areas (Pakistan)?",
        options: ["40 km/h", "50 km/h", "60 km/h", "80 km/h"],
        correct: 2,
        explanation: "The default speed limit in urban areas of Pakistan is 60 km/h unless otherwise posted."
    },
    {
        question: "What shape is a standard stop sign?",
        options: ["Circle", "Triangle", "Rectangle", "Octagon"],
        correct: 3,
        explanation: "Stop signs are octagonal (8-sided) with red background and white text."
    },
    {
        question: "At a zebra crossing, you should:",
        options: ["Stop to let pedestrians cross", "Honk and continue", "Ignore if in a hurry", "Speed up"],
        correct: 0,
        explanation: "Pedestrians have the right of way at zebra crossings. Always stop and let them cross safely."
    },
    {
        question: "When turning right at a green light, you must:",
        options: ["Yield to oncoming traffic", "Drive fast to beat traffic", "Honk for right of way", "Only turn when no cars are behind"],
        correct: 0,
        explanation: "Even with a green light, you must yield to oncoming traffic when making a right turn."
    },
    {
        question: "The maximum speed limit on most motorways in Pakistan is:",
        options: ["80 km/h", "100 km/h", "120 km/h", "140 km/h"],
        correct: 2,
        explanation: "The maximum speed limit on motorways in Pakistan is typically 120 km/h."
    },
    {
        question: "Yellow light means:",
        options: ["Prepare to stop", "Ignore and proceed", "Only turn left", "Pedestrians must go"],
        correct: 0,
        explanation: "Yellow light is a warning to prepare to stop. Do not try to beat the red light."
    },
    {
        question: "When changing lanes on a highway, you should:",
        options: ["Signal and check mirrors", "Swerve quickly", "Honk continuously", "Speed up without looking"],
        correct: 0,
        explanation: "Always signal your intention, check mirrors and blind spots before changing lanes safely."
    },
    {
        question: "On a roundabout, priority is given to:",
        options: ["Vehicles already in the roundabout", "Vehicles entering from the left", "No one, it's a free-for-all", "Fastest cars first"],
        correct: 0,
        explanation: "Vehicles already circulating in the roundabout have the right of way over entering vehicles."
    },
    {
        question: "Driving without fastening seat belts is:",
        options: ["Safe at low speed", "Against the law", "Recommended on highways", "Optional for front seat"],
        correct: 1,
        explanation: "Wearing seat belts is mandatory by law in Pakistan for all passengers in the vehicle."
    },
    {
        question: "A diamond-shaped road sign usually indicates:",
        options: ["Warning or hazard", "Mandatory action", "Service area", "Speed zone"],
        correct: 0,
        explanation: "Diamond-shaped signs are warning signs that alert drivers to potential hazards ahead."
    },
    {
        question: "If an ambulance approaches with sirens on, you must:",
        options: ["Give way immediately", "Race it to the next signal", "Ignore if you're in a hurry", "Stop in the middle of the road"],
        correct: 0,
        explanation: "Emergency vehicles have the right of way. Pull over safely to allow them to pass."
    },
    {
        question: "In poor visibility conditions (fog), you should:",
        options: ["Use low beam headlights", "Use high beams continuously", "Turn lights off to save battery", "Drive faster to clear fog"],
        correct: 0,
        explanation: "Use low beam headlights in fog. High beams reflect off fog and reduce visibility further."
    },
    {
        question: "Before opening your car door on a busy road, you should:",
        options: ["Check side mirrors and blind spot", "Open quickly without looking", "Honk before opening", "Wait for someone to pass you"],
        correct: 0,
        explanation: "Always check mirrors and look over your shoulder before opening doors to avoid accidents."
    },
    {
        question: "Tailgating (driving very close) to the vehicle ahead is:",
        options: ["Dangerous and discouraged", "A good way to save fuel", "Required on narrow roads", "Mandatory in heavy traffic"],
        correct: 0,
        explanation: "Tailgating is dangerous and increases the risk of rear-end collisions. Maintain safe following distance."
    },
    {
        question: "When can you overtake another vehicle on the left side?",
        options: ["Generally never in Pakistan", "Only when the driver in front signals right", "You feel they are driving slowly", "You have a better car"],
        correct: 1,
        explanation: "Overtaking on the left is generally prohibited, except when the vehicle ahead is turning right."
    },
    {
        question: "A 'No U-turn' sign indicates:",
        options: ["You cannot make a U-turn", "You can stop anytime", "You must turn around at will", "Turn only if traffic is clear"],
        correct: 0,
        explanation: "No U-turn signs prohibit making U-turns at that location. Look for designated U-turn points."
    },
    {
        question: "You should always use your indicator when:",
        options: ["Turning or changing lanes", "The street is empty", "You don't feel like it", "Traffic signals are working"],
        correct: 0,
        explanation: "Always use indicators when turning or changing lanes to communicate your intentions to other drivers."
    },
    {
        question: "Driving under the influence of alcohol in Pakistan is:",
        options: ["Illegal and punishable", "Permitted in rural areas only", "Allowed if window is open", "Fine if you drive slowly"],
        correct: 0,
        explanation: "Driving under the influence is illegal throughout Pakistan and carries severe penalties."
    },
    {
        question: "If you hear a strange noise from your vehicle on a highway, you must:",
        options: ["Pull over safely and inspect", "Ignore and continue your journey", "Drive faster to reduce noise", "Stop in the middle of the road"],
        correct: 0,
        explanation: "Strange noises indicate potential mechanical problems. Pull over safely and inspect your vehicle."
    }
];

// Quiz State
let currentQuestion = 0;
let userAnswers = new Array(quizQuestions.length).fill(null);
let quizCompleted = false;

// DOM Elements
const quizContent = document.getElementById('quiz-content');
const prevBtn = document.getElementById('prev-btn');
const nextBtn = document.getElementById('next-btn');
const submitBtn = document.getElementById('submit-btn');
const progressFill = document.getElementById('progress-fill');
const currentScore = document.getElementById('current-score');
const percentage = document.getElementById('percentage');
const quizResults = document.getElementById('quiz-results');
const restartBtn = document.getElementById('restart-btn');

// Initialize Quiz
function initQuiz() {
    currentQuestion = 0;
    userAnswers = new Array(quizQuestions.length).fill(null);
    quizCompleted = false;
    quizResults.style.display = 'none';
    document.querySelector('.quiz-container').style.display = 'block';
    loadQuestion();
    updateProgress();
    updateControls();
}

// Load Current Question
function loadQuestion() {
    const question = quizQuestions[currentQuestion];
    const isAnswered = userAnswers[currentQuestion] !== null;
    const correctIndex = question.correct;
    const userAnswer = userAnswers[currentQuestion];
    const isCorrect = userAnswer === correctIndex;
    
    quizContent.innerHTML = `
        <div class="question-card">
            <div class="question-header">
                <span class="question-number">Question ${currentQuestion + 1} of ${quizQuestions.length}</span>
                <div class="question-icons">
                    <i class="fas fa-lightbulb"></i>
                </div>
            </div>
            <h3 class="question-text">${question.question}</h3>
            <div class="options-grid">
                ${question.options.map((option, index) => {
                    let classes = 'option-btn';
                    if (isAnswered) {
                        if (index === correctIndex) classes += ' correct';
                        else if (index === userAnswer && index !== correctIndex) classes += ' incorrect';
                        if (index === userAnswer) classes += ' selected';
                    }
                    return `
                    <button class="${classes}" 
                            onclick="selectOption(${index})" 
                            ${isAnswered ? 'disabled' : ''}>
                        <span class="option-letter">${String.fromCharCode(65 + index)}</span>
                        <span class="option-text">${option}</span>
                    </button>
                `;}).join('')}
            </div>
            
            <div id="explanation-container" class="explanation-container" style="display: ${isAnswered ? 'block' : 'none'};">
                ${isAnswered ? `
                    <div class="explanation-content">
                        <div class="answer-result ${isCorrect ? 'correct' : 'incorrect'}">
                            <i class="fas ${isCorrect ? 'fa-check-circle' : 'fa-times-circle'}"></i>
                            <strong>${isCorrect ? 'Correct!' : 'Incorrect'}</strong>
                            ${!isCorrect ? `<span>The correct answer is: <strong>${question.options[correctIndex]}</strong></span>` : ''}
                        </div>
                        <h4><i class="fas fa-info-circle"></i> Explanation</h4>
                        <p>${question.explanation}</p>
                    </div>
                ` : ''}
            </div>
        </div>
    `;
}

// Select Option
function selectOption(optionIndex) {
    if (userAnswers[currentQuestion] !== null) return; // Prevent changing answer
    
    userAnswers[currentQuestion] = optionIndex;
    updateScore();
    
    const question = quizQuestions[currentQuestion];
    const correctIndex = question.correct;
    const isCorrect = optionIndex === correctIndex;
    
    // Update button styles to show correct/incorrect
    document.querySelectorAll('.option-btn').forEach((btn, index) => {
        btn.disabled = true; // Disable all buttons after selection
        if (index === correctIndex) {
            btn.classList.add('correct');
        } else if (index === optionIndex && index !== correctIndex) {
            btn.classList.add('incorrect');
        }
        if (index === optionIndex) {
            btn.classList.add('selected');
        }
    });
    
    // Show explanation with result
    const explanationContainer = document.getElementById('explanation-container');
    const explanationText = document.getElementById('explanation-text');
    
    explanationContainer.innerHTML = `
        <div class="explanation-content">
            <div class="answer-result ${isCorrect ? 'correct' : 'incorrect'}">
                <i class="fas ${isCorrect ? 'fa-check-circle' : 'fa-times-circle'}"></i>
                <strong>${isCorrect ? 'Correct!' : 'Incorrect'}</strong>
                ${!isCorrect ? `<span>The correct answer is: <strong>${question.options[correctIndex]}</strong></span>` : ''}
            </div>
            <h4><i class="fas fa-info-circle"></i> Explanation</h4>
            <p>${question.explanation}</p>
        </div>
    `;
    explanationContainer.style.display = 'block';
    
    updateControls();
}

// Update Progress
function updateProgress() {
    const progress = ((currentQuestion + 1) / quizQuestions.length) * 100;
    progressFill.style.width = progress + '%';
}

// Update Score Display
function updateScore() {
    const answered = userAnswers.filter(answer => answer !== null).length;
    let correct = 0;
    
    userAnswers.forEach((answer, index) => {
        if (answer !== null && answer === quizQuestions[index].correct) {
            correct++;
        }
    });
    
    currentScore.textContent = correct;
    percentage.textContent = answered > 0 ? Math.round((correct / answered) * 100) + '%' : '0%';
}

// Update Controls
function updateControls() {
    const nextBtn = document.getElementById('next-btn');
    const continueBtn = document.getElementById('continue-btn');
    const submitBtn = document.getElementById('submit-btn');
    const prevBtn = document.getElementById('prev-btn');
    
    prevBtn.disabled = currentQuestion === 0;
    
    const isAnswered = userAnswers[currentQuestion] !== null;
    const isLastQuestion = currentQuestion === quizQuestions.length - 1;
    
    if (isAnswered) {
        nextBtn.style.display = 'none';
        if (isLastQuestion) {
            continueBtn.style.display = 'none';
            submitBtn.style.display = 'inline-block';
        } else {
            continueBtn.style.display = 'inline-block';
            submitBtn.style.display = 'none';
        }
    } else {
        nextBtn.style.display = isLastQuestion ? 'none' : 'inline-block';
        continueBtn.style.display = 'none';
        submitBtn.style.display = isLastQuestion ? 'inline-block' : 'none';
    }
}

// Navigation Functions
function nextQuestion() {
    if (currentQuestion < quizQuestions.length - 1) {
        currentQuestion++;
        loadQuestion();
        updateProgress();
        updateControls();
    }
}

function prevQuestion() {
    if (currentQuestion > 0) {
        currentQuestion--;
        loadQuestion();
        updateProgress();
        updateControls();
    }
}

// Submit Quiz
function submitQuiz() {
    quizCompleted = true;
    showResults();
}

// Show Results
function showResults() {
    const correct = userAnswers.filter((answer, index) => answer === quizQuestions[index].correct).length;
    const incorrect = quizQuestions.length - correct;
    const finalPercentage = Math.round((correct / quizQuestions.length) * 100);
    
    document.getElementById('final-score').textContent = correct;
    document.getElementById('correct-count').textContent = correct;
    document.getElementById('incorrect-count').textContent = incorrect;
    document.getElementById('final-percentage').textContent = finalPercentage + '%';
    
    // Generate questions summary
    const summaryContainer = document.getElementById('questions-summary');
    summaryContainer.innerHTML = quizQuestions.map((question, index) => {
        const userAnswer = userAnswers[index];
        const isCorrect = userAnswer === question.correct;
        const userAnswerText = userAnswer !== null ? question.options[userAnswer] : 'Not answered';
        const correctAnswerText = question.options[question.correct];
        
        return `
            <div class="summary-item ${isCorrect ? 'correct' : 'incorrect'}">
                <div class="summary-header">
                    <span class="question-num">Q${index + 1}</span>
                    <i class="fas ${isCorrect ? 'fa-check-circle' : 'fa-times-circle'}"></i>
                </div>
                <div class="summary-content">
                    <h4>${question.question}</h4>
                    <p><strong>Your answer:</strong> ${userAnswerText}</p>
                    ${!isCorrect ? `<p><strong>Correct answer:</strong> ${correctAnswerText}</p>` : ''}
                    <p><strong>Explanation:</strong> ${question.explanation}</p>
                </div>
            </div>
        `;
    }).join('');
    
    document.querySelector('.quiz-container').style.display = 'none';
    quizResults.style.display = 'block';
    
    // Animate score circle
    animateScoreCircle(finalPercentage);
}

// Animate Score Circle
function animateScoreCircle(percentage) {
    const circle = document.querySelector('.score-circle');
    circle.style.background = `conic-gradient(#4CAF50 ${percentage * 3.6}deg, #e0e0e0 0deg)`;
}

// Event Listeners
nextBtn.addEventListener('click', nextQuestion);
continueBtn.addEventListener('click', nextQuestion);
prevBtn.addEventListener('click', prevQuestion);
submitBtn.addEventListener('click', submitQuiz);
restartBtn.addEventListener('click', initQuiz);

// Initialize quiz on page load
document.addEventListener('DOMContentLoaded', initQuiz);
</script>


    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3><i class="fas fa-traffic-light"></i> Traffic Safety Hub</h3>
                    <p>Learn traffic safety through interactive quizzes and educational content. Practice safe driving habits and test your knowledge.</p>
                </div>
                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="/traffic-quiz/quizzes/">Take a Quiz</a></li>
                        <li><a href="/traffic-quiz/blog/">Safety Tips</a></li>
                        <li><a href="/traffic-quiz/about/">About Us</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Safety Topics</h4>
                    <ul>
                        <li><a href="/traffic-quiz/blog/defensive-driving-tips/">Defensive Driving</a></li>
                        <li><a href="/traffic-quiz/blog/road-signs-guide/">Road Signs</a></li>
                        <li><a href="/traffic-quiz/blog/winter-driving-safety/">Weather Safety</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Traffic Safety Hub. Educational content for safer driving.</p>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="/traffic-quiz/assets/js/main.js"></script>
</body>
</html>